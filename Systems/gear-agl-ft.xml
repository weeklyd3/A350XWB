<?xml version="1.0" encoding="UTF-8"?>

<!-- IT-AUTOFLIGHT -->
<!-- Copyright (c) 2019 Joshua Davidson (it0uchpods) -->
<!-- Only for JSBsim aircraft, YAsim aircraft calculate this automatically -->

<PropertyList>
	
	<filter>
		<name>Gear AGL Altitude FT</name>
		<type>gain</type>
		<gain>1.0</gain>
		<input>
			<expression>
				<dif>
					<property>/position/altitude-agl-ft</property>
					<value>15.0</value> <!-- Change this value to adjust property -->
				</dif>
			</expression>
		</input>
		<output>/position/gear-agl-ft</output>
		<min>0</min>
		<max>50000</max>
	</filter>

	<filter>
		<name>Gear AGL Altitude FT</name>
		<type>gain</type>
		<gain>1.0</gain>
		<input>
			<expression>
				<dif>
					<property>/position/gear-agl-ft</property>
					<div>
						<sum>
							<property>fdm/jsbsim/gear/unit[1]/compression-ft</property>
							<property>fdm/jsbsim/gear/unit[2]/compression-ft</property>
						</sum>
						<value>2</value>
					</div>
				</dif>
			</expression>
		</input>
		<output>/instrumentation/altimeter/indicated-radio-altitude-ft</output>
		<min>-2500</min>
		<max>2600</max>
	</filter>
	<logic>
		<input>
			<or>
				<and>
					<less-than>
						<property>/instrumentation/altimeter/indicated-altitude-ft</property>
						<property>/it-autoflight/internal/alt</property>
					</less-than>
					<or>
						<and>
							<equals>
								<property>/it-autoflight/output/vert</property>
								<value>1</value>
							</equals>
							<not>
								<less-than>
									<property>/it-autoflight/input/vs</property>
									<value>0</value>
								</less-than>
							</not>
						</and>
						<equals>
							<property>/it-autoflight/output/vert</property>
							<value>4</value>
						</equals>
						<and>
							<equals>
								<property>/it-autoflight/output/vert</property>
								<value>5</value>
							</equals>
							<not>
								<less-than>
									<property>/it-autoflight/input/fpa</property>
									<value>0</value>
								</less-than>
							</not>
						</and>
					</or>
				</and>
				<and>
					<greater-than>
						<property>/instrumentation/altimeter/indicated-altitude-ft</property>
						<property>/it-autoflight/internal/alt</property>
					</greater-than>
					<or>
						<and>
							<equals>
								<property>/it-autoflight/output/vert</property>
								<value>1</value>
							</equals>
							<not>
								<greater-than>
									<property>/it-autoflight/input/vs</property>
									<value>0</value>
								</greater-than>
							</not>
						</and>
						<equals>
							<property>/it-autoflight/output/vert</property>
							<value>4</value>
						</equals>
						<and>
							<equals>
								<property>/it-autoflight/output/vert</property>
								<value>5</value>
							</equals>
							<not>
								<greater-than>
									<property>/it-autoflight/input/fpa</property>
									<value>0</value>
								</greater-than>
							</not>
						</and>
					</or>
				</and>
			</or>
		</input>
		<output>/it-autoflight/internal/alt-arm</output>
	</logic>
	<filter>
		<name>Drift Angle</name>
		<type>gain</type>
		<gain>1.0</gain>
		<input>/instrumentation/nav/radials/selected-deg</input>
		<reference>/systems/pfd/heading</reference>
		<output>/systems/pfd/course-difference</output>
		<period>
			<min>-180</min>
			<max>180</max>
		</period>
	</filter>
	<filter>
		<name>Mach x100</name>
		<type>gain</type>
		<gain>100</gain>
		<input>/it-autoflight/input/mach</input>
		<output>/it-autoflight/input/mach-x100</output>
	</filter>
	<predict-simple>
		<name>predicted airspeed for captain</name>
		<input>/instrumentation/airspeed-indicator/indicated-speed-kt</input>
		<output>/instrumentation/airspeed-indicator/predicted-speed-kt</output>
		<seconds>10</seconds>
		<filter-gain>0.01</filter-gain>
	</predict-simple>
	<predict-simple>
		<name>predicted airspeed for f/o</name>
		<input>/instrumentation/airspeed-indicator[1]/indicated-speed-kt</input>
		<output>/instrumentation/airspeed-indicator[1]/predicted-speed-kt</output>
		<seconds>10</seconds>
		<filter-gain>0.01</filter-gain>
	</predict-simple>
</PropertyList>
